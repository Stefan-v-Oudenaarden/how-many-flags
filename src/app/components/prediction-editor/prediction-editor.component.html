<div class="container mx-auto p-6 pt-2 max-w-6xl">
  <div class="bg-white rounded-lg shadow overflow-hidden">
    <div class="overflow-x-auto">
      <table class="w-full">
        <thead class="bg-gray-100 border-b border-gray-200">
          <tr>
            <th class="px-6 py-3 text-left text-sm font-semibold text-gray-700">Participant</th>
            <th class="px-6 py-3 text-left text-sm font-semibold text-gray-700">Flags</th>
            <th class="px-6 py-3 text-left text-sm font-semibold text-gray-700">Drivers</th>
            <th class="px-6 py-3 text-left text-sm font-semibold text-gray-700">Winner</th>
            <th class="px-6 py-3 text-left text-sm font-semibold text-gray-700">DNF</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-200 border-b">
          @for (participant of participants; track participant) {
          <tr class="hover:bg-gray-50 transition-colors truncate">
            <td class="px-6 py-4 font-medium text-gray-900 truncate max-w-48">
              {{ participant }}
            </td>
            <td class="px-3 py-2">
              <input
                type="number"
                [(ngModel)]="raceData[raceID()][participant].flags"
                min="0"
                class="w-16 px-3 h-8.5 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                (ngModelChange)="onModelChange()"
              />
            </td>
            <td class="px-3 py-2">
              <input
                type="number"
                [(ngModel)]="raceData[raceID()][participant].drivers"
                min="0"
                class="w-16 px-3 h-8.5 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                (ngModelChange)="onModelChange()"
              />
            </td>
            <td class="px-3 py-2">
              <brn-select
                class="inline-block"
                placeholder="Select a driver"
                [multiple]="false"
                [(value)]="raceData[raceID()][participant].winner"
                (valueChange)="onModelChange()"
              >
                <hlm-select-trigger class="w-34">
                  <hlm-select-value />
                </hlm-select-trigger>
                <hlm-select-content class="">
                  @for(driver of raceDataService.Datasets()[year()].drivers;track driver) {
                  <hlm-option [value]="driver" class="h-6">{{ driver }}</hlm-option
                  >}
                </hlm-select-content>
              </brn-select>
            </td>
            <td class="px-3 py-2">
              <brn-select
                class="inline-block"
                placeholder="Select a driver(s)"
                [(value)]="raceData[raceID()][participant].dnf"
                (valueChange)="onModelChange()"
              >
                <hlm-select-trigger class="w-34">
                  <hlm-select-value />
                </hlm-select-trigger>
                <hlm-select-content>
                  @for(driver of raceDataService.Datasets()[year()].drivers;track driver) {
                  <hlm-option [value]="driver" class="h-6">{{ driver }}</hlm-option
                  >}
                </hlm-select-content>
              </brn-select>
            </td>
          </tr>
          }
        </tbody>
      </table>

      <div class="flex px-3 py-2 justify-around truncate">
        <input
          [(ngModel)]="newParticipantName"
          placeholder="New Participant..."
          id="name"
          class="w-104 px-3 h-8.5 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
        />

        <button
          hlmBtn
          type="submit"
          class="bg-transparent hover:bg-blue-500 text-blue-700 font-semibold hover:text-white px-3 h-8.5 py-1 border border-blue-500 hover:border-transparent rounded"
          (click)="AddParticipant(newParticipantName)"
        >
          Add Participant
        </button>
      </div>
    </div>
  </div>
</div>
